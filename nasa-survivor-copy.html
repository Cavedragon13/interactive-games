<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moon Survival Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&family=Inter:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0B1426 0%, #1B2951 50%, #041E42 100%);
            color: #FFFFFF;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(11, 20, 38, 0.95);
            border: 3px solid #FC3D21;
            border-radius: 15px;
            box-shadow: 0 0 40px rgba(252, 61, 33, 0.2), inset 0 0 20px rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(90deg, #041E42 0%, #0B1426 50%, #041E42 100%);
            padding: 25px;
            text-align: center;
            border-bottom: 3px solid #FC3D21;
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FC3D21 0%, #FF6B35 50%, #FC3D21 100%);
        }
        
        .title {
            font-family: 'Inter', sans-serif;
            font-size: 32px;
            font-weight: 700;
            color: #FFFFFF;
            text-shadow: 0 0 15px rgba(252, 61, 33, 0.6);
            margin-bottom: 8px;
            letter-spacing: 2px;
        }
        
        .nasa-logo {
            display: inline-block;
            background: #FC3D21;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 16px;
            color: #A8B2D1;
            opacity: 0.9;
            font-weight: 500;
        }
        
        .game-content {
            padding: 30px;
        }
        
        .scenario-box {
            background: linear-gradient(135deg, rgba(4, 30, 66, 0.8) 0%, rgba(27, 41, 81, 0.6) 100%);
            border: 2px solid #5A9FD4;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: inset 0 0 15px rgba(90, 159, 212, 0.1);
            position: relative;
        }
        
        .scenario-box::before {
            content: 'MISSION BRIEFING';
            position: absolute;
            top: -12px;
            left: 20px;
            background: #041E42;
            color: #5A9FD4;
            padding: 4px 12px;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .scenario-title {
            font-family: 'Inter', sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: #FC3D21;
            margin-bottom: 18px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .scenario-text {
            font-size: 14px;
            line-height: 1.8;
            text-align: justify;
        }
        
        .instructions {
            background: linear-gradient(135deg, rgba(252, 61, 33, 0.15) 0%, rgba(255, 107, 53, 0.1) 100%);
            border: 2px solid #FC3D21;
            border-radius: 8px;
            padding: 18px;
            margin: 20px 0;
            font-size: 14px;
            font-weight: 500;
            position: relative;
        }
        
        .instructions::before {
            content: 'MISSION PARAMETERS';
            position: absolute;
            top: -12px;
            left: 15px;
            background: #041E42;
            color: #FC3D21;
            padding: 4px 10px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .drag-instructions {
            background: linear-gradient(135deg, rgba(90, 159, 212, 0.15) 0%, rgba(168, 178, 209, 0.1) 100%);
            border: 2px solid #5A9FD4;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 14px;
            text-align: center;
            font-weight: 500;
        }
        
        .ranking-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            margin: 20px 0;
            min-height: 400px;
        }
        
        .item-card {
            background: linear-gradient(135deg, rgba(27, 41, 81, 0.9) 0%, rgba(4, 30, 66, 0.8) 100%);
            border: 2px solid #A8B2D1;
            border-radius: 10px;
            padding: 18px;
            transition: all 0.3s ease;
            position: relative;
            cursor: grab;
            user-select: none;
            display: flex;
            align-items: center;
            gap: 18px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .item-card:hover {
            border-color: #5A9FD4;
            box-shadow: 0 4px 20px rgba(90, 159, 212, 0.3);
            transform: translateY(-2px);
            background: linear-gradient(135deg, rgba(90, 159, 212, 0.2) 0%, rgba(27, 41, 81, 0.9) 100%);
        }
        
        .item-card.dragging {
            opacity: 0.7;
            transform: rotate(3deg);
            cursor: grabbing;
            z-index: 1000;
            box-shadow: 0 15px 35px rgba(252, 61, 33, 0.4);
            border-color: #FC3D21;
        }
        
        .item-card.drag-over {
            border-color: #FC3D21;
            background: linear-gradient(135deg, rgba(252, 61, 33, 0.2) 0%, rgba(27, 41, 81, 0.9) 100%);
        }
        
        .rank-number {
            background: linear-gradient(45deg, #FC3D21, #FF6B35);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            font-size: 18px;
            flex-shrink: 0;
            box-shadow: 0 3px 10px rgba(252, 61, 33, 0.3);
        }
        
        .item-content {
            flex: 1;
        }
        
        .item-name {
            font-weight: 600;
            color: #FFFFFF;
            margin-bottom: 6px;
            font-size: 15px;
        }
        
        .item-description {
            font-size: 13px;
            color: #A8B2D1;
            font-style: italic;
            margin-bottom: 0;
        }
        
        .reason-input {
            display: none;
        }
        
        .drag-handle {
            color: #A8B2D1;
            font-size: 24px;
            cursor: grab;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
            opacity: 0.6;
        }
        
        .drag-handle:hover {
            color: #5A9FD4;
            background: rgba(90, 159, 212, 0.1);
            opacity: 1;
        }
        
        .controls {
            text-align: center;
            margin: 30px 0;
        }
        
        .btn {
            background: linear-gradient(45deg, #FC3D21, #FF6B35);
            border: none;
            color: white;
            padding: 15px 30px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(252, 61, 33, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(252, 61, 33, 0.5);
            background: linear-gradient(45deg, #FF6B35, #FC3D21);
        }
        
        .btn:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .results {
            background: linear-gradient(135deg, rgba(4, 30, 66, 0.9) 0%, rgba(27, 41, 81, 0.8) 100%);
            border: 2px solid #5A9FD4;
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
            display: none;
            box-shadow: 0 5px 20px rgba(90, 159, 212, 0.2);
        }
        
        .results.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .score {
            font-family: 'Inter', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: #FFFFFF;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            margin: 20px 0;
        }
        
        .comparison-table th,
        .comparison-table td {
            border: 1px solid #444;
            padding: 8px;
            text-align: left;
        }
        
        .comparison-table th {
            background: rgba(90, 159, 212, 0.3);
            color: #FFFFFF;
            font-weight: 600;
        }
        
        .comparison-table tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .expert-explanation {
            background: linear-gradient(135deg, rgba(90, 159, 212, 0.15) 0%, rgba(168, 178, 209, 0.1) 100%);
            border-left: 4px solid #5A9FD4;
            padding: 18px;
            margin: 15px 0;
            font-size: 13px;
            border-radius: 0 8px 8px 0;
        }
        
        .progress-indicator {
            text-align: center;
            font-size: 15px;
            margin: 20px 0;
            color: #5A9FD4;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 20px;
            }
            
            .game-content {
                padding: 15px;
            }
            
            .item-card {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .rank-number {
                margin-bottom: 10px;
            }
        }
        
        /* Smooth animations for reordering */
        .item-card {
            transition: transform 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease;
        }
        
        .ranking-area {
            position: relative;
        }
        
        /* Visual feedback for drag operations */
        .drop-zone {
            min-height: 60px;
            border: 2px dashed #666;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-style: italic;
            margin: 5px 0;
            transition: all 0.3s ease;
        }
        
        .drop-zone.active {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="nasa-logo">NASA</div>
            <div class="title">LUNAR SURVIVAL MISSION</div>
            <div class="subtitle">Astronaut Training Exercise • Mission Control Interface</div>
        </div>
        
        <div class="game-content">
            <div class="scenario-box">
                <div class="scenario-title">⚠️ EMERGENCY SITUATION ⚠️</div>
                <div class="scenario-text">
                    The year is 2025. You are part of a four-member crew traveling to the Moon in your spacecraft. 
                    As you prepare to land at the lunar outpost near the south pole, disaster strikes! 
                    A thruster malfunction forces an emergency landing <strong>80 kilometers (50 miles)</strong> from your destination.
                    <br><br>
                    You find yourself stranded on the charcoal-gray, dusty surface of the Moon. The environment is harsh and unforgiving: 
                    no atmosphere, deadly radiation, temperatures ranging from -193°C (-315°F) at night to 111°C (232°F) during the day, 
                    and gravity only one-sixth that of Earth.
                    <br><br>
                    <strong>Your survival depends on reaching the lunar outpost.</strong> You must choose the most critical items 
                    from your damaged spacecraft to make the treacherous journey across the lunar landscape.
                </div>
            </div>
            
            <div class="instructions">
                <strong>MISSION INSTRUCTIONS:</strong><br>
                Rank the 15 items below from 1 (most important) to 15 (least important) for your survival. 
                Consider what you need to survive in the lunar environment and reach the outpost 50 miles away.
            </div>
            
            <div class="drag-instructions">
                <strong>🖱️ DRAG & DROP:</strong> Drag items up and down to reorder them by importance. 
                Trust your instincts and survival logic!
            </div>
            
            <div class="progress-indicator" id="progressText">
                Arrange all 15 items in order of importance for survival - Ready to analyze!
            </div>
            
            <div class="ranking-area" id="rankingArea">
                <!-- Items will be populated by JavaScript -->
            </div>
            
            <div class="controls">
                <button class="btn" onclick="checkRankings()" id="checkBtn">
                    Analyze Survival Strategy
                </button>
                <button class="btn" onclick="resetGame()">Reset Mission</button>
            </div>
            
            <div class="results" id="results">
                <!-- Results will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        const items = [
            {
                id: 'oxygen',
                name: "Two 45.5kg (100-pound) tanks of oxygen",
                description: "Pressurized tanks of oxygen",
                expertRank: 1,
                explanation: "With basically no atmosphere on the Moon, oxygen to breathe is the most pressing survival need. The average person needs about 0.84 kilograms of O2 per day."
            },
            {
                id: 'water',
                name: "38 liters (10 gallons) of water",
                description: "Container of water",
                expertRank: 2,
                explanation: "Water is essential to all life. There is no liquid water on the Moon, and each astronaut needs about 11 liters of water daily."
            },
            {
                id: 'food',
                name: "Food concentrate",
                description: "Dehydrated food to which water is added",
                expertRank: 3,
                explanation: "Food concentrate is a good source of nutrition and an efficient way to carry it. Though it needs water, it meets a basic survival need."
            },
            {
                id: 'radio',
                name: "Solar-powered radio receiver-transmitter",
                description: "Communication tool powered by the sun",
                expertRank: 4,
                explanation: "Maintaining communication with the lunar outpost is essential. People there are looking for you while you try to reach them."
            },
            {
                id: 'firstaid',
                name: "First aid kit",
                description: "Basic first aid kit with pain medication and medicine for infection",
                expertRank: 5,
                explanation: "A first aid kit takes up little space and may be important in case of illness or injury during the journey."
            },
            {
                id: 'map',
                name: "Map of the Moon's surface",
                description: "A map showing the Moon's terrain",
                expertRank: 6,
                explanation: "With no other directional tools available, a map is the most important means of finding your way from one location to another."
            },
            {
                id: 'repair',
                name: "Space suit repair kit",
                description: "Materials to repair tiny holes in fabric",
                expertRank: 7,
                explanation: "Your space suit protects you from harsh conditions. The sharp lunar soil can cut tiny holes that may compromise its effectiveness."
            },
            {
                id: 'raft',
                name: "Life raft",
                description: "Self-inflatable floatation device",
                expertRank: 8,
                explanation: "The life raft makes a great sled for carrying the oxygen and water across the lunar surface."
            },
            {
                id: 'blanket',
                name: "Space blanket",
                description: "Thin sheet of plastic material coated with metallic reflecting layer",
                expertRank: 9,
                explanation: "Used to insulate supplies from extreme temperatures. Temperatures can range from -193°C to 111°C on the Moon."
            },
            {
                id: 'rope',
                name: "15 meters (50 feet) of nylon rope",
                description: "Manufactured rope",
                expertRank: 10,
                explanation: "The rope makes dragging the life raft easier or may come in handy when crossing difficult terrain."
            },
            {
                id: 'lights',
                name: "Lights with solar-powered rechargeable batteries",
                description: "Portable lights powered by solar batteries",
                expertRank: 11,
                explanation: "The lights are helpful if you travel across large shadowed areas. Some polar regions are permanently dark."
            },
            {
                id: 'mirror',
                name: "Signal mirror",
                description: "Handheld mirror",
                expertRank: 12,
                explanation: "The signal mirror is used as a form of communication if the radio is not working."
            },
            {
                id: 'parachute',
                name: "Parachute",
                description: "Large piece of silk cloth",
                expertRank: 13,
                explanation: "Parachute silk comes in handy as a backup sled to the life raft, or as shade."
            },
            {
                id: 'matches',
                name: "Box of matches",
                description: "Wooden sticks with sulfur-treated heads",
                expertRank: 14,
                explanation: "With little oxygen on the Moon, the matches are useless for starting fires."
            },
            {
                id: 'compass',
                name: "Magnetic compass",
                description: "Tool that uses a magnetic field to determine direction",
                expertRank: 15,
                explanation: "The compass is virtually useless because there is no Moon-wide magnetic field."
            }
        ];

        let currentOrder = [];
        let draggedElement = null;

        function initGame() {
            // Shuffle items for initial display
            currentOrder = [...items].sort(() => Math.random() - 0.5);
            renderItems();
        }

        function renderItems() {
            const rankingArea = document.getElementById('rankingArea');
            rankingArea.innerHTML = '';
            
            currentOrder.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'item-card';
                card.draggable = true;
                card.dataset.itemId = item.id;
                
                card.innerHTML = `
                    <div class="rank-number">${index + 1}</div>
                    <div class="item-content">
                        <div class="item-name">${item.name}</div>
                        <div class="item-description">${item.description}</div>
                    </div>
                    <div class="drag-handle">⋮⋮</div>
                `;
                
                // Add drag event listeners
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
                card.addEventListener('dragover', handleDragOver);
                card.addEventListener('drop', handleDrop);
                card.addEventListener('dragenter', handleDragEnter);
                card.addEventListener('dragleave', handleDragLeave);
                
                rankingArea.appendChild(card);
            });
        }

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', e.target.outerHTML);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedElement = null;
            
            // Remove all drag-over classes
            document.querySelectorAll('.item-card').forEach(card => {
                card.classList.remove('drag-over');
            });
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            if (e.target.closest('.item-card') && e.target.closest('.item-card') !== draggedElement) {
                e.target.closest('.item-card').classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            if (e.target.closest('.item-card')) {
                e.target.closest('.item-card').classList.remove('drag-over');
            }
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }

            const dropTarget = e.target.closest('.item-card');
            if (dropTarget && draggedElement && dropTarget !== draggedElement) {
                const draggedId = draggedElement.dataset.itemId;
                const dropTargetId = dropTarget.dataset.itemId;
                
                const draggedIndex = currentOrder.findIndex(item => item.id === draggedId);
                const dropTargetIndex = currentOrder.findIndex(item => item.id === dropTargetId);
                
                // Reorder the array
                const draggedItem = currentOrder.splice(draggedIndex, 1)[0];
                currentOrder.splice(dropTargetIndex, 0, draggedItem);
                
                // Re-render with smooth transition
                renderItems();
            }
            
            return false;
        }

        function updateReason(itemId, reason) {
            // Removed - no longer needed
        }

        function checkRankings() {
            let totalScore = 0;
            let results = '';
            
            // Calculate score based on current order
            currentOrder.forEach((item, index) => {
                const userRank = index + 1;
                const expertRank = item.expertRank;
                const difference = Math.abs(userRank - expertRank);
                totalScore += difference;
            });

            // Determine survival assessment
            let assessment = '';
            let assessmentColor = '';
            if (totalScore <= 25) {
                assessment = 'EXCELLENT - NASA Astronaut Material!';
                assessmentColor = '#00ff88';
            } else if (totalScore <= 45) {
                assessment = 'GOOD - You\'d likely survive!';
                assessmentColor = '#88ff00';
            } else if (totalScore <= 70) {
                assessment = 'FAIR - Risky but possible';
                assessmentColor = '#ffaa00';
            } else {
                assessment = 'POOR - Survival unlikely';
                assessmentColor = '#ff4444';
            }

            results += `
                <div class="score">
                    <div>SURVIVAL ASSESSMENT SCORE: ${totalScore}</div>
                    <div style="color: ${assessmentColor}; margin-top: 10px;">${assessment}</div>
                    <div style="font-size: 14px; color: #ccc; margin-top: 10px;">
                        (Lower scores indicate better survival chances)
                    </div>
                </div>
                
                <div class="expert-explanation">
                    <strong>How NASA Scoring Works:</strong> Your score is the sum of differences between your rankings and NASA expert rankings. 
                    Perfect score = 0. The experts prioritized life support (oxygen, water, food) first, then communication and navigation, 
                    then tools for the journey. Items useless on the Moon (matches, compass) ranked lowest.
                </div>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Your Rank</th>
                            <th>Expert Rank</th>
                            <th>Difference</th>
                            <th>Expert Reasoning</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            // Sort by expert ranking for display
            const sortedItems = [...items].sort((a, b) => a.expertRank - b.expertRank);
            
            sortedItems.forEach(item => {
                const userRank = currentOrder.findIndex(i => i.id === item.id) + 1;
                const expertRank = item.expertRank;
                const difference = Math.abs(userRank - expertRank);
                const diffColor = difference === 0 ? '#00ff88' : difference <= 2 ? '#ffaa00' : '#ff6666';
                
                results += `
                    <tr>
                        <td><strong>${item.name}</strong></td>
                        <td style="text-align: center;">${userRank}</td>
                        <td style="text-align: center; color: #88ccff;">${expertRank}</td>
                        <td style="text-align: center; color: ${diffColor};">+${difference}</td>
                        <td style="font-size: 11px;">${item.explanation}</td>
                    </tr>
                `;
            });

            results += `
                    </tbody>
                </table>
                
                <div class="expert-explanation">
                    <strong>Key Insights:</strong><br>
                    • <strong>Oxygen</strong> is #1 - you'll die in minutes without it<br>
                    • <strong>Water</strong> is #2 - critical for multi-day survival<br>
                    • <strong>Food</strong> is #3 - needed for energy during the 50-mile trek<br>
                    • <strong>Communication</strong> is #4 - rescue teams need to find you<br>
                    • <strong>Navigation</strong> is #6 - you must know where you're going<br>
                    • <strong>Matches & Compass</strong> are useless - no oxygen to burn, no magnetic field
                </div>
            `;

            document.getElementById('results').innerHTML = results;
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function resetGame() {
            document.getElementById('results').classList.remove('show');
            document.getElementById('results').innerHTML = '';
            initGame();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize the game
        initGame();
    </script>
</body>
</html>